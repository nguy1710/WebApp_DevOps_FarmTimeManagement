<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Staff Login - Farm Time Management</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <!-- Back to Login Button - Outside Card -->
    <div class="position-fixed top-0 start-0 m-3" style="z-index: 1050;">
      <a href="login.html" class="btn btn-primary btn-lg shadow">
        <i class="bi bi-arrow-left me-2"></i>Back to Login
      </a>
    </div>

    <div class="container-fluid vh-100 d-flex align-items-center justify-content-center bg-light">
      <div class="card shadow-lg" style="width: 100%; max-width: 500px;">
        <div class="card-header bg-primary text-white text-center">
          <h4 class="mb-0">Staff Login</h4>
          <small>Scan your QR code to access your information</small>
        </div>
        <div class="card-body p-3">
          <div id="errorMessage" class="alert alert-danger d-none"></div>
          <div id="successMessage" class="alert alert-success d-none"></div>
          
          <!-- Camera Section -->
          <div class="text-center mb-3">
            <video id="video" width="100%" height="200" class="border rounded"></video>
            <canvas id="canvas" width="400" height="300" style="display: none;"></canvas>
          </div>

          <!-- Manual Login Section -->
          <div class="border-top pt-2">
            <h6 class="text-center text-muted mb-2 small">Or Login Manually</h6>
            <form id="manualLoginForm">
              <div class="mb-2">
                <input type="text" class="form-control form-control-sm" id="scanResultInput" placeholder="Enter scan result" required>
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-outline-primary btn-sm">
                  Login Manually
                </button>
              </div>
            </form>
          </div>
        </div>
        <div class="card-footer text-center text-muted small">
          <p class="mb-0">Farm Time Management System</p>
          <p class="mb-0">Scan QR code or enter Staff ID to access your information</p>
          <p class="mb-0 text-info fw-bold">Sample Staff login biometric data: 123456789</p>
        </div>
      </div>
    </div>

    <!-- Include QR Code Scanner Library -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script>
      window.API_BASE = "https://flindersdevops.azurewebsites.net/api";
    </script>
    <script src="js/staff-login.js"></script>
  </body>
</html>
